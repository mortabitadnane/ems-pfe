package com.maroc_ouvrage.semployee.service.Imp;

import com.maroc_ouvrage.semployee.dto.CongeDTO;
import com.maroc_ouvrage.semployee.mapper.CongeMapper;
import com.maroc_ouvrage.semployee.model.Conge;
import com.maroc_ouvrage.semployee.model.Employee;
import com.maroc_ouvrage.semployee.repo.CongeRepository;
import com.maroc_ouvrage.semployee.repo.EmployeeRepository;
import com.maroc_ouvrage.semployee.service.CongeService;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.stereotype.Service;

import java.util.List;
import java.util.stream.Collectors;

@Service
public class CongeServiceImpl implements CongeService {

    private final CongeRepository congeRepository;
    private final CongeMapper congeMapper;
    private final EmployeeRepository employeeRepository;


    @Autowired
    public CongeServiceImpl(CongeRepository congeRepository, EmployeeRepository employeeRepository, CongeMapper congeMapper) {
        this.congeRepository = congeRepository;
        this.congeMapper = congeMapper;
        this.employeeRepository = employeeRepository;
    }

    @Override
    public CongeDTO createConge(CongeDTO congeDTO) {

        Employee employee = employeeRepository.findByCin(congeDTO.getEmployeeCin())
                .orElseThrow(() -> new RuntimeException("Employee not found"));
        // Convert CongeDTO%3CmxGraphModel%3E%3Croot%3E%3CmxCell%20id%3D%220%22%2F%3E%3CmxCell%20id%3D%221%22%20parent%3D%220%22%2F%3E%3CUserObject%20label%3D%22%22%20plantUmlData%3D%22%7B%26quot%3Bdata%26quot%3B%3A%26quot%3B%40startuml%5Cnclass%20Employee%20%7B%5Cn%20%20-Long%20id%5Cn%20%20-String%20cin%5Cn%20%20-String%20firstName%5Cn%20%20-String%20lastName%5Cn%20%20-String%20position%5Cn%20%20-String%20rib%5Cn%20%20%2BcreateEmployeeWithContract(employeecontractDTO%3A%20EmployeecontractDTO)%5Cn%20%20%2BupdateEmployee(id%3A%20Long%2C%20employeecontractDTO%3A%20EmployeecontractDTO)%5Cn%20%20%2BgetEmployeeById(id%3A%20Long)%3A%20EmployeecontractDTO%5Cn%20%20%2BgetAllEmployees()%3A%20List%26lt%3BEmployeecontractDTO%26gt%3B%5Cn%20%20%2BdeleteEmployee(id%3A%20Long)%5Cn%7D%5Cn%5Cnclass%20Department%20%7B%5Cn%20%20-Long%20id%5Cn%20%20-String%20name%5Cn%20%20-String%20location%5Cn%20%20%2BcreateDepartment(departmentDTO%3A%20DepartmentDTO)%5Cn%20%20%2BgetDepartmentById(id%3A%20Long)%3A%20DepartmentDTO%5Cn%20%20%2BgetAllDepartments()%3A%20List%26lt%3BDepartmentDTO%26gt%3B%5Cn%20%20%2BdeleteDepartment(id%3A%20Long)%5Cn%20%20%2BassignEmployeeToDepartment(employeeId%3A%20Long%2C%20departmentId%3A%20Long)%5Cn%7D%5Cn%5Cnclass%20Contract%20%7B%5Cn%20%20-Long%20id%5Cn%20%20-String%20contractType%5Cn%20%20-Double%20salary%5Cn%20%20-String%20jobTitle%5Cn%20%20-LocalDate%20startDate%5Cn%20%20-LocalDate%20endDate%5Cn%20%20-String%20benefits%5Cn%20%20%2BcreateContract(contractDTO%3A%20ContractDTO)%5Cn%20%20%2BupdateContract(id%3A%20Long%2C%20contractDTO%3A%20ContractDTO)%5Cn%20%20%2BgetContractById(id%3A%20Long)%3A%20ContractDTO%5Cn%20%20%2BgetContractByEmployeeId(employeeId%3A%20Long)%3A%20ContractDTO%5Cn%20%20%2BdeleteContract(id%3A%20Long)%5Cn%20%20%2BgetAllContracts()%3A%20List%26lt%3BContractDTO%26gt%3B%5Cn%7D%5Cn%5Cnclass%20Conge%20%7B%5Cn%20%20-Long%20id%5Cn%20%20-LocalDate%20startDate%5Cn%20%20-LocalDate%20endDate%5Cn%20%20-String%20status%5Cn%20%20-String%20employeeCin%5Cn%20%20-String%20reason%5Cn%20%20%2BcreateConge(congeDTO%3A%20CongeDTO)%5Cn%20%20%2BupdateConge(id%3A%20Long%2C%20congeDTO%3A%20CongeDTO)%5Cn%20%20%2BgetCongeById(id%3A%20Long)%3A%20CongeDTO%5Cn%20%20%2BgetCongeByEmployeeCin(employeeCin%3A%20String)%3A%20CongeDTO%5Cn%20%20%2BgetAllConge()%3A%20List%26lt%3BCongeDTO%26gt%3B%5Cn%20%20%2BdeleteConge(id%3A%20Long)%5Cn%7D%5Cn%5CnEmployee%20%5C%26quot%3B1%5C%26quot%3B%20--%20%5C%26quot%3B*%5C%26quot%3B%20Conge%20%3A%20has%5CnEmployee%20%5C%26quot%3B1%5C%26quot%3B%20--%20%5C%26quot%3B1%5C%26quot%3B%20Contract%20%3A%20has%5CnEmployee%20%5C%26quot%3B*%5C%26quot%3B%20--%20%5C%26quot%3B1%5C%26quot%3B%20Department%20%3A%20belongs%20to%5Cn%40enduml%26quot%3B%2C%26quot%3Bformat%26quot%3B%3A%26quot%3Bsvg%26quot%3B%7D%22%20id%3D%222%22%3E%3CmxCell%20style%3D%22shape%3Dimage%3BnoLabel%3D1%3BverticalAlign%3Dtop%3Baspect%3Dfixed%3BimageAspect%3D0%3Bimage%3Ddata%3Aimage%2Fsvg%2Bxml%2CPHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiBjb250ZW50U3R5bGVUeXBlPSJ0ZXh0L2NzcyIgZGF0YS1kaWFncmFtLXR5cGU9IkNMQVNTIiBoZWlnaHQ9IjU0NHB4IiBwcmVzZXJ2ZUFzcGVjdFJhdGlvPSJub25lIiBzdHlsZT0id2lkdGg6MTM1MnB4O2hlaWdodDo1NDRweDtiYWNrZ3JvdW5kOiNGRkZGRkY7IiB2ZXJzaW9uPSIxLjEiIHZpZXdCb3g9IjAgMCAxMzUyIDU0NCIgd2lkdGg9IjEzNTJweCIgem9vbUFuZFBhbj0ibWFnbmlmeSI%2BPGRlZnMvPjxnPjwhLS1jbGFzcyBFbXBsb3llZS0tPjxnIGNsYXNzPSJlbnRpdHkiIGRhdGEtZW50aXR5PSJFbXBsb3llZSIgZGF0YS1zb3VyY2UtbGluZT0iMSIgZGF0YS11aWQ9ImVudDAwMDIiIGlkPSJlbnRpdHlfRW1wbG95ZWUiPjxyZWN0IGZpbGw9IiNGMUYxRjEiIGhlaWdodD0iMjEyLjgyODEiIHJ4PSIyLjUiIHJ5PSIyLjUiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIgd2lkdGg9IjUwMiIgeD0iNDY3IiB5PSI3Ii8%2BPGVsbGlwc2UgY3g9IjY4NS43NSIgY3k9IjIzIiBmaWxsPSIjQUREMUIyIiByeD0iMTEiIHJ5PSIxMSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIvPjxwYXRoIGQ9Ik02ODMuMzc1LDI3LjI1IEw2ODMuMzc1LDI5IEw2ODguMzEyNSwyOSBMNjg4LjMxMjUsMjcuMjUgTDY4My4zNzUsMjcuMjUgWiBNNjg0LjA2MjUsMjcuOTM3NSBRNjg0LjA2MjUsMjcuOTM3NSA2ODQuMDYyNSwxOC43NSBMNjgyLjMxMjUsMTguNzUgUTY4Mi4zMTI1LDE4Ljc1IDY4Mi4zMTI1LDI3LjkzNzUgTDY4NC4wNjI1LDI3LjkzNzUgWiBNNjg3LjYyNSwyNy45Mzc1IEw2ODkuMzc1LDI3LjkzNzUgUTY4OS4zNzUsMjcuOTM3NSA2ODkuMzc1LDI1LjEyNSBMNjg3LjYyNSwyNS4xMjUgUTY4Ny42MjUsMjUuMTI1IDY4Ny42MjUsMjcuOTM3NSBaIE02ODcuNjI1LDE4Ljc1IFE2ODcuNjI1LDE4Ljc1IDY4Ny42MjUsMjEuNTYyNSBMNjg5LjM3NSwyMS41NjI1IFE2ODkuMzc1LDIxLjU2MjUgNjg5LjM3NSwxOC43NSBMNjg3LjYyNSwxOC43NSBaIE02ODMuMzc1LDE5LjQzNzUgTDY4OC4zMTI1LDE5LjQzNzUgTDY4OC4zMTI1LDE3LjY4NzUgTDY4My4zNzUsMTcuNjg3NSBMNjgzLjM3NSwxOS40Mzc1IFogIiBmaWxsPSIjMDAwMDAwIi8%2BPHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iNTYiIHg9IjcwNi4yNSIgeT0iMjguNzQyMiI%2BRW1wbG95ZWU8L3RleHQ%2BPGxpbmUgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7IiB4MT0iNDY4IiB4Mj0iOTY4IiB5MT0iMzkiIHkyPSIzOSIvPjxyZWN0IGZpbGw9Im5vbmUiIGhlaWdodD0iNiIgc3R5bGU9InN0cm9rZTojQzgyOTMwO3N0cm9rZS13aWR0aDoxOyIgd2lkdGg9IjYiIHg9IjQ3NSIgeT0iNDguOTkyMiIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjQ5IiB4PSI0ODciIHk9IjU2LjIzNDQiPkxvbmcgaWQ8L3RleHQ%2BPHJlY3QgZmlsbD0ibm9uZSIgaGVpZ2h0PSI2IiBzdHlsZT0ic3Ryb2tlOiNDODI5MzA7c3Ryb2tlLXdpZHRoOjE7IiB3aWR0aD0iNiIgeD0iNDc1IiB5PSI2My45NzY2Ii8%2BPHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iNzAiIHg9IjQ4NyIgeT0iNzEuMjE4OCI%2BU3RyaW5nIGNpbjwvdGV4dD48cmVjdCBmaWxsPSJub25lIiBoZWlnaHQ9IjYiIHN0eWxlPSJzdHJva2U6I0M4MjkzMDtzdHJva2Utd2lkdGg6MTsiIHdpZHRoPSI2IiB4PSI0NzUiIHk9Ijc4Ljk2MDkiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIxMTIiIHg9IjQ4NyIgeT0iODYuMjAzMSI%2BU3RyaW5nIGZpcnN0TmFtZTwvdGV4dD48cmVjdCBmaWxsPSJub25lIiBoZWlnaHQ9IjYiIHN0eWxlPSJzdHJva2U6I0M4MjkzMDtzdHJva2Utd2lkdGg6MTsiIHdpZHRoPSI2IiB4PSI0NzUiIHk9IjkzLjk0NTMiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIxMDUiIHg9IjQ4NyIgeT0iMTAxLjE4NzUiPlN0cmluZyBsYXN0TmFtZTwvdGV4dD48cmVjdCBmaWxsPSJub25lIiBoZWlnaHQ9IjYiIHN0eWxlPSJzdHJva2U6I0M4MjkzMDtzdHJva2Utd2lkdGg6MTsiIHdpZHRoPSI2IiB4PSI0NzUiIHk9IjEwOC45Mjk3Ii8%2BPHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMTA1IiB4PSI0ODciIHk9IjExNi4xNzE5Ij5TdHJpbmcgcG9zaXRpb248L3RleHQ%2BPHJlY3QgZmlsbD0ibm9uZSIgaGVpZ2h0PSI2IiBzdHlsZT0ic3Ryb2tlOiNDODI5MzA7c3Ryb2tlLXdpZHRoOjE7IiB3aWR0aD0iNiIgeD0iNDc1IiB5PSIxMjMuOTE0MSIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjcwIiB4PSI0ODciIHk9IjEzMS4xNTYzIj5TdHJpbmcgcmliPC90ZXh0PjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIgeDE9IjQ2OCIgeDI9Ijk2OCIgeTE9IjEzNi45MDYzIiB5Mj0iMTM2LjkwNjMiLz48ZWxsaXBzZSBjeD0iNDc4IiBjeT0iMTQ5Ljg5ODQiIGZpbGw9IiM4NEJFODQiIHJ4PSIzIiByeT0iMyIgc3R5bGU9InN0cm9rZTojMDM4MDQ4O3N0cm9rZS13aWR0aDoxOyIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjQ3NiIgeD0iNDg3IiB5PSIxNTQuMTQwNiI%2BY3JlYXRlRW1wbG95ZWVXaXRoQ29udHJhY3QoZW1wbG95ZWVjb250cmFjdERUTzogRW1wbG95ZWVjb250cmFjdERUTyk8L3RleHQ%2BPGVsbGlwc2UgY3g9IjQ3OCIgY3k9IjE2NC44ODI4IiBmaWxsPSIjODRCRTg0IiByeD0iMyIgcnk9IjMiIHN0eWxlPSJzdHJva2U6IzAzODA0ODtzdHJva2Utd2lkdGg6MTsiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI0NjIiIHg9IjQ4NyIgeT0iMTY5LjEyNSI%2BdXBkYXRlRW1wbG95ZWUoaWQ6IExvbmcsIGVtcGxveWVlY29udHJhY3REVE86IEVtcGxveWVlY29udHJhY3REVE8pPC90ZXh0PjxlbGxpcHNlIGN4PSI0NzgiIGN5PSIxNzkuODY3MiIgZmlsbD0iIzg0QkU4NCIgcng9IjMiIHJ5PSIzIiBzdHlsZT0ic3Ryb2tlOiMwMzgwNDg7c3Ryb2tlLXdpZHRoOjE7Ii8%2BPHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMzIyIiB4PSI0ODciIHk9IjE4NC4xMDk0Ij5nZXRFbXBsb3llZUJ5SWQoaWQ6IExvbmcpOiBFbXBsb3llZWNvbnRyYWN0RFRPPC90ZXh0PjxlbGxpcHNlIGN4PSI0NzgiIGN5PSIxOTQuODUxNiIgZmlsbD0iIzg0QkU4NCIgcng9IjMiIHJ5PSIzIiBzdHlsZT0ic3Ryb2tlOiMwMzgwNDg7c3Ryb2tlLXdpZHRoOjE7Ii8%2BPHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMzA4IiB4PSI0ODciIHk9IjE5OS4wOTM4Ij5nZXRBbGxFbXBsb3llZXMoKTogTGlzdCZsdDtFbXBsb3llZWNvbnRyYWN0RFRPJmd0OzwvdGV4dD48ZWxsaXBzZSBjeD0iNDc4IiBjeT0iMjA5LjgzNTkiIGZpbGw9IiM4NEJFODQiIHJ4PSIzIiByeT0iMyIgc3R5bGU9InN0cm9rZTojMDM4MDQ4O3N0cm9rZS13aWR0aDoxOyIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjE2OCIgeD0iNDg3IiB5PSIyMTQuMDc4MSI%2BZGVsZXRlRW1wbG95ZWUoaWQ6IExvbmcpPC90ZXh0PjwvZz48IS0tY2xhc3MgRGVwYXJ0bWVudC0tPjxnIGNsYXNzPSJlbnRpdHkiIGRhdGEtZW50aXR5PSJEZXBhcnRtZW50IiBkYXRhLXNvdXJjZS1saW5lPSIxNSIgZGF0YS11aWQ9ImVudDAwMDMiIGlkPSJlbnRpdHlfRGVwYXJ0bWVudCI%2BPHJlY3QgZmlsbD0iI0YxRjFGMSIgaGVpZ2h0PSIxNjcuODc1IiByeD0iMi41IiByeT0iMi41IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiIHdpZHRoPSI0NzQiIHg9IjciIHk9IjMzMi41Ii8%2BPGVsbGlwc2UgY3g9IjIwNC43NSIgY3k9IjM0OC41IiBmaWxsPSIjQUREMUIyIiByeD0iMTEiIHJ5PSIxMSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIvPjxwYXRoIGQ9Ik0yMDIuMzc1LDM1Mi43NSBMMjAyLjM3NSwzNTQuNSBMMjA3LjMxMjUsMzU0LjUgTDIwNy4zMTI1LDM1Mi43NSBMMjAyLjM3NSwzNTIuNzUgWiBNMjAzLjA2MjUsMzUzLjQzNzUgUTIwMy4wNjI1LDM1My40Mzc1IDIwMy4wNjI1LDM0NC4yNSBMMjAxLjMxMjUsMzQ0LjI1IFEyMDEuMzEyNSwzNDQuMjUgMjAxLjMxMjUsMzUzLjQzNzUgTDIwMy4wNjI1LDM1My40Mzc1IFogTTIwNi42MjUsMzUzLjQzNzUgTDIwOC4zNzUsMzUzLjQzNzUgUTIwOC4zNzUsMzUzLjQzNzUgMjA4LjM3NSwzNTAuNjI1IEwyMDYuNjI1LDM1MC42MjUgUTIwNi42MjUsMzUwLjYyNSAyMDYuNjI1LDM1My40Mzc1IFogTTIwNi42MjUsMzQ0LjI1IFEyMDYuNjI1LDM0NC4yNSAyMDYuNjI1LDM0Ny4wNjI1IEwyMDguMzc1LDM0Ny4wNjI1IFEyMDguMzc1LDM0Ny4wNjI1IDIwOC4zNzUsMzQ0LjI1IEwyMDYuNjI1LDM0NC4yNSBaIE0yMDIuMzc1LDM0NC45Mzc1IEwyMDcuMzEyNSwzNDQuOTM3NSBMMjA3LjMxMjUsMzQzLjE4NzUgTDIwMi4zNzUsMzQzLjE4NzUgTDIwMi4zNzUsMzQ0LjkzNzUgWiAiIGZpbGw9IiMwMDAwMDAiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI3MCIgeD0iMjI1LjI1IiB5PSIzNTQuMjQyMiI%2BRGVwYXJ0bWVudDwvdGV4dD48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiIHgxPSI4IiB4Mj0iNDgwIiB5MT0iMzY0LjUiIHkyPSIzNjQuNSIvPjxyZWN0IGZpbGw9Im5vbmUiIGhlaWdodD0iNiIgc3R5bGU9InN0cm9rZTojQzgyOTMwO3N0cm9rZS13aWR0aDoxOyIgd2lkdGg9IjYiIHg9IjE1IiB5PSIzNzQuNDkyMiIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjQ5IiB4PSIyNyIgeT0iMzgxLjczNDQiPkxvbmcgaWQ8L3RleHQ%2BPHJlY3QgZmlsbD0ibm9uZSIgaGVpZ2h0PSI2IiBzdHlsZT0ic3Ryb2tlOiNDODI5MzA7c3Ryb2tlLXdpZHRoOjE7IiB3aWR0aD0iNiIgeD0iMTUiIHk9IjM4OS40NzY2Ii8%2BPHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iNzciIHg9IjI3IiB5PSIzOTYuNzE4OCI%2BU3RyaW5nIG5hbWU8L3RleHQ%2BPHJlY3QgZmlsbD0ibm9uZSIgaGVpZ2h0PSI2IiBzdHlsZT0ic3Ryb2tlOiNDODI5MzA7c3Ryb2tlLXdpZHRoOjE7IiB3aWR0aD0iNiIgeD0iMTUiIHk9IjQwNC40NjA5Ii8%2BPHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMTA1IiB4PSIyNyIgeT0iNDExLjcwMzEiPlN0cmluZyBsb2NhdGlvbjwvdGV4dD48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiIHgxPSI4IiB4Mj0iNDgwIiB5MT0iNDE3LjQ1MzEiIHkyPSI0MTcuNDUzMSIvPjxlbGxpcHNlIGN4PSIxOCIgY3k9IjQzMC40NDUzIiBmaWxsPSIjODRCRTg0IiByeD0iMyIgcnk9IjMiIHN0eWxlPSJzdHJva2U6IzAzODA0ODtzdHJva2Utd2lkdGg6MTsiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIzMjIiIHg9IjI3IiB5PSI0MzQuNjg3NSI%2BY3JlYXRlRGVwYXJ0bWVudChkZXBhcnRtZW50RFRPOiBEZXBhcnRtZW50RFRPKTwvdGV4dD48ZWxsaXBzZSBjeD0iMTgiIGN5PSI0NDUuNDI5NyIgZmlsbD0iIzg0QkU4NCIgcng9IjMiIHJ5PSIzIiBzdHlsZT0ic3Ryb2tlOiMwMzgwNDg7c3Ryb2tlLXdpZHRoOjE7Ii8%2BPHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMjk0IiB4PSIyNyIgeT0iNDQ5LjY3MTkiPmdldERlcGFydG1lbnRCeUlkKGlkOiBMb25nKTogRGVwYXJ0bWVudERUTzwvdGV4dD48ZWxsaXBzZSBjeD0iMTgiIGN5PSI0NjAuNDE0MSIgZmlsbD0iIzg0QkU4NCIgcng9IjMiIHJ5PSIzIiBzdHlsZT0ic3Ryb2tlOiMwMzgwNDg7c3Ryb2tlLXdpZHRoOjE7Ii8%2BPHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMjgwIiB4PSIyNyIgeT0iNDY0LjY1NjMiPmdldEFsbERlcGFydG1lbnRzKCk6IExpc3QmbHQ7RGVwYXJ0bWVudERUTyZndDs8L3RleHQ%2BPGVsbGlwc2UgY3g9IjE4IiBjeT0iNDc1LjM5ODQiIGZpbGw9IiM4NEJFODQiIHJ4PSIzIiByeT0iMyIgc3R5bGU9InN0cm9rZTojMDM4MDQ4O3N0cm9rZS13aWR0aDoxOyIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjE4MiIgeD0iMjciIHk9IjQ3OS42NDA2Ij5kZWxldGVEZXBhcnRtZW50KGlkOiBMb25nKTwvdGV4dD48ZWxsaXBzZSBjeD0iMTgiIGN5PSI0OTAuMzgyOCIgZmlsbD0iIzg0QkU4NCIgcng9IjMiIHJ5PSIzIiBzdHlsZT0ic3Ryb2tlOiMwMzgwNDg7c3Ryb2tlLXdpZHRoOjE7Ii8%2BPHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iNDQ4IiB4PSIyNyIgeT0iNDk0LjYyNSI%2BYXNzaWduRW1wbG95ZWVUb0RlcGFydG1lbnQoZW1wbG95ZWVJZDogTG9uZywgZGVwYXJ0bWVudElkOiBMb25nKTwvdGV4dD48L2c%2BPCEtLWNsYXNzIENvbnRyYWN0LS0%2BPGcgY2xhc3M9ImVudGl0eSIgZGF0YS1lbnRpdHk9IkNvbnRyYWN0IiBkYXRhLXNvdXJjZS1saW5lPSIyNiIgZGF0YS11aWQ9ImVudDAwMDQiIGlkPSJlbnRpdHlfQ29udHJhY3QiPjxyZWN0IGZpbGw9IiNGMUYxRjEiIGhlaWdodD0iMjQyLjc5NjkiIHJ4PSIyLjUiIHJ5PSIyLjUiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIgd2lkdGg9IjQwNCIgeD0iNTE2IiB5PSIyOTUiLz48ZWxsaXBzZSBjeD0iNjg1Ljc1IiBjeT0iMzExIiBmaWxsPSIjQUREMUIyIiByeD0iMTEiIHJ5PSIxMSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIvPjxwYXRoIGQ9Ik02ODMuMzc1LDMxNS4yNSBMNjgzLjM3NSwzMTcgTDY4OC4zMTI1LDMxNyBMNjg4LjMxMjUsMzE1LjI1IEw2ODMuMzc1LDMxNS4yNSBaIE02ODQuMDYyNSwzMTUuOTM3NSBRNjg0LjA2MjUsMzE1LjkzNzUgNjg0LjA2MjUsMzA2Ljc1IEw2ODIuMzEyNSwzMDYuNzUgUTY4Mi4zMTI1LDMwNi43NSA2ODIuMzEyNSwzMTUuOTM3NSBMNjg0LjA2MjUsMzE1LjkzNzUgWiBNNjg3LjYyNSwzMTUuOTM3NSBMNjg5LjM3NSwzMTUuOTM3NSBRNjg5LjM3NSwzMTUuOTM3NSA2ODkuMzc1LDMxMy4xMjUgTDY4Ny42MjUsMzEzLjEyNSBRNjg3LjYyNSwzMTMuMTI1IDY4Ny42MjUsMzE1LjkzNzUgWiBNNjg3LjYyNSwzMDYuNzUgUTY4Ny42MjUsMzA2Ljc1IDY4Ny42MjUsMzA5LjU2MjUgTDY4OS4zNzUsMzA5LjU2MjUgUTY4OS4zNzUsMzA5LjU2MjUgNjg5LjM3NSwzMDYuNzUgTDY4Ny42MjUsMzA2Ljc1IFogTTY4My4zNzUsMzA3LjQzNzUgTDY4OC4zMTI1LDMwNy40Mzc1IEw2ODguMzEyNSwzMDUuNjg3NSBMNjgzLjM3NSwzMDUuNjg3NSBMNjgzLjM3NSwzMDcuNDM3NSBaICIgZmlsbD0iIzAwMDAwMCIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjU2IiB4PSI3MDYuMjUiIHk9IjMxNi43NDIyIj5Db250cmFjdDwvdGV4dD48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiIHgxPSI1MTciIHgyPSI5MTkiIHkxPSIzMjciIHkyPSIzMjciLz48cmVjdCBmaWxsPSJub25lIiBoZWlnaHQ9IjYiIHN0eWxlPSJzdHJva2U6I0M4MjkzMDtzdHJva2Utd2lkdGg6MTsiIHdpZHRoPSI2IiB4PSI1MjQiIHk9IjMzNi45OTIyIi8%2BPHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iNDkiIHg9IjUzNiIgeT0iMzQ0LjIzNDQiPkxvbmcgaWQ8L3RleHQ%2BPHJlY3QgZmlsbD0ibm9uZSIgaGVpZ2h0PSI2IiBzdHlsZT0ic3Ryb2tlOiNDODI5MzA7c3Ryb2tlLXdpZHRoOjE7IiB3aWR0aD0iNiIgeD0iNTI0IiB5PSIzNTEuOTc2NiIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjEzMyIgeD0iNTM2IiB5PSIzNTkuMjE4OCI%2BU3RyaW5nIGNvbnRyYWN0VHlwZTwvdGV4dD48cmVjdCBmaWxsPSJub25lIiBoZWlnaHQ9IjYiIHN0eWxlPSJzdHJva2U6I0M4MjkzMDtzdHJva2Utd2lkdGg6MTsiIHdpZHRoPSI2IiB4PSI1MjQiIHk9IjM2Ni45NjA5Ii8%2BPHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iOTEiIHg9IjUzNiIgeT0iMzc0LjIwMzEiPkRvdWJsZSBzYWxhcnk8L3RleHQ%2BPHJlY3QgZmlsbD0ibm9uZSIgaGVpZ2h0PSI2IiBzdHlsZT0ic3Ryb2tlOiNDODI5MzA7c3Ryb2tlLXdpZHRoOjE7IiB3aWR0aD0iNiIgeD0iNTI0IiB5PSIzODEuOTQ1MyIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjEwNSIgeD0iNTM2IiB5PSIzODkuMTg3NSI%2BU3RyaW5nIGpvYlRpdGxlPC90ZXh0PjxyZWN0IGZpbGw9Im5vbmUiIGhlaWdodD0iNiIgc3R5bGU9InN0cm9rZTojQzgyOTMwO3N0cm9rZS13aWR0aDoxOyIgd2lkdGg9IjYiIHg9IjUyNCIgeT0iMzk2LjkyOTciLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIxMzMiIHg9IjUzNiIgeT0iNDA0LjE3MTkiPkxvY2FsRGF0ZSBzdGFydERhdGU8L3RleHQ%2BPHJlY3QgZmlsbD0ibm9uZSIgaGVpZ2h0PSI2IiBzdHlsZT0ic3Ryb2tlOiNDODI5MzA7c3Ryb2tlLXdpZHRoOjE7IiB3aWR0aD0iNiIgeD0iNTI0IiB5PSI0MTEuOTE0MSIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjExOSIgeD0iNTM2IiB5PSI0MTkuMTU2MyI%2BTG9jYWxEYXRlIGVuZERhdGU8L3RleHQ%2BPHJlY3QgZmlsbD0ibm9uZSIgaGVpZ2h0PSI2IiBzdHlsZT0ic3Ryb2tlOiNDODI5MzA7c3Ryb2tlLXdpZHRoOjE7IiB3aWR0aD0iNiIgeD0iNTI0IiB5PSI0MjYuODk4NCIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjEwNSIgeD0iNTM2IiB5PSI0MzQuMTQwNiI%2BU3RyaW5nIGJlbmVmaXRzPC90ZXh0PjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIgeDE9IjUxNyIgeDI9IjkxOSIgeTE9IjQzOS44OTA2IiB5Mj0iNDM5Ljg5MDYiLz48ZWxsaXBzZSBjeD0iNTI3IiBjeT0iNDUyLjg4MjgiIGZpbGw9IiM4NEJFODQiIHJ4PSIzIiByeT0iMyIgc3R5bGU9InN0cm9rZTojMDM4MDQ4O3N0cm9rZS13aWR0aDoxOyIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjI4MCIgeD0iNTM2IiB5PSI0NTcuMTI1Ij5jcmVhdGVDb250cmFjdChjb250cmFjdERUTzogQ29udHJhY3REVE8pPC90ZXh0PjxlbGxpcHNlIGN4PSI1MjciIGN5PSI0NjcuODY3MiIgZmlsbD0iIzg0QkU4NCIgcng9IjMiIHJ5PSIzIiBzdHlsZT0ic3Ryb2tlOiMwMzgwNDg7c3Ryb2tlLXdpZHRoOjE7Ii8%2BPHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMzUwIiB4PSI1MzYiIHk9IjQ3Mi4xMDk0Ij51cGRhdGVDb250cmFjdChpZDogTG9uZywgY29udHJhY3REVE86IENvbnRyYWN0RFRPKTwvdGV4dD48ZWxsaXBzZSBjeD0iNTI3IiBjeT0iNDgyLjg1MTYiIGZpbGw9IiM4NEJFODQiIHJ4PSIzIiByeT0iMyIgc3R5bGU9InN0cm9rZTojMDM4MDQ4O3N0cm9rZS13aWR0aDoxOyIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjI2NiIgeD0iNTM2IiB5PSI0ODcuMDkzOCI%2BZ2V0Q29udHJhY3RCeUlkKGlkOiBMb25nKTogQ29udHJhY3REVE88L3RleHQ%2BPGVsbGlwc2UgY3g9IjUyNyIgY3k9IjQ5Ny44MzU5IiBmaWxsPSIjODRCRTg0IiByeD0iMyIgcnk9IjMiIHN0eWxlPSJzdHJva2U6IzAzODA0ODtzdHJva2Utd2lkdGg6MTsiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIzNzgiIHg9IjUzNiIgeT0iNTAyLjA3ODEiPmdldENvbnRyYWN0QnlFbXBsb3llZUlkKGVtcGxveWVlSWQ6IExvbmcpOiBDb250cmFjdERUTzwvdGV4dD48ZWxsaXBzZSBjeD0iNTI3IiBjeT0iNTEyLjgyMDMiIGZpbGw9IiM4NEJFODQiIHJ4PSIzIiByeT0iMyIgc3R5bGU9InN0cm9rZTojMDM4MDQ4O3N0cm9rZS13aWR0aDoxOyIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjE2OCIgeD0iNTM2IiB5PSI1MTcuMDYyNSI%2BZGVsZXRlQ29udHJhY3QoaWQ6IExvbmcpPC90ZXh0PjxlbGxpcHNlIGN4PSI1MjciIGN5PSI1MjcuODA0NyIgZmlsbD0iIzg0QkU4NCIgcng9IjMiIHJ5PSIzIiBzdHlsZT0ic3Ryb2tlOiMwMzgwNDg7c3Ryb2tlLXdpZHRoOjE7Ii8%2BPHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMjUyIiB4PSI1MzYiIHk9IjUzMi4wNDY5Ij5nZXRBbGxDb250cmFjdHMoKTogTGlzdCZsdDtDb250cmFjdERUTyZndDs8L3RleHQ%2BPC9nPjwhLS1jbGFzcyBDb25nZS0tPjxnIGNsYXNzPSJlbnRpdHkiIGRhdGEtZW50aXR5PSJDb25nZSIgZGF0YS1zb3VyY2UtbGluZT0iNDIiIGRhdGEtdWlkPSJlbnQwMDA1IiBpZD0iZW50aXR5X0NvbmdlIj48cmVjdCBmaWxsPSIjRjFGMUYxIiBoZWlnaHQ9IjIyNy44MTI1IiByeD0iMi41IiByeT0iMi41IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiIHdpZHRoPSIzOTAiIHg9Ijk1NSIgeT0iMzAyLjUiLz48ZWxsaXBzZSBjeD0iMTEyOC4yNSIgY3k9IjMxOC41IiBmaWxsPSIjQUREMUIyIiByeD0iMTEiIHJ5PSIxMSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIvPjxwYXRoIGQ9Ik0xMTI1Ljg3NSwzMjIuNzUgTDExMjUuODc1LDMyNC41IEwxMTMwLjgxMjUsMzI0LjUgTDExMzAuODEyNSwzMjIuNzUgTDExMjUuODc1LDMyMi43NSBaIE0xMTI2LjU2MjUsMzIzLjQzNzUgUTExMjYuNTYyNSwzMjMuNDM3NSAxMTI2LjU2MjUsMzE0LjI1IEwxMTI0LjgxMjUsMzE0LjI1IFExMTI0LjgxMjUsMzE0LjI1IDExMjQuODEyNSwzMjMuNDM3NSBMMTEyNi41NjI1LDMyMy40Mzc1IFogTTExMzAuMTI1LDMyMy40Mzc1IEwxMTMxLjg3NSwzMjMuNDM3NSBRMTEzMS44NzUsMzIzLjQzNzUgMTEzMS44NzUsMzIwLjYyNSBMMTEzMC4xMjUsMzIwLjYyNSBRMTEzMC4xMjUsMzIwLjYyNSAxMTMwLjEyNSwzMjMuNDM3NSBaIE0xMTMwLjEyNSwzMTQuMjUgUTExMzAuMTI1LDMxNC4yNSAxMTMwLjEyNSwzMTcuMDYyNSBMMTEzMS44NzUsMzE3LjA2MjUgUTExMzEuODc1LDMxNy4wNjI1IDExMzEuODc1LDMxNC4yNSBMMTEzMC4xMjUsMzE0LjI1IFogTTExMjUuODc1LDMxNC45Mzc1IEwxMTMwLjgxMjUsMzE0LjkzNzUgTDExMzAuODEyNSwzMTMuMTg3NSBMMTEyNS44NzUsMzEzLjE4NzUgTDExMjUuODc1LDMxNC45Mzc1IFogIiBmaWxsPSIjMDAwMDAwIi8%2BPHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMzUiIHg9IjExNDguNzUiIHk9IjMyNC4yNDIyIj5Db25nZTwvdGV4dD48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiIHgxPSI5NTYiIHgyPSIxMzQ0IiB5MT0iMzM0LjUiIHkyPSIzMzQuNSIvPjxyZWN0IGZpbGw9Im5vbmUiIGhlaWdodD0iNiIgc3R5bGU9InN0cm9rZTojQzgyOTMwO3N0cm9rZS13aWR0aDoxOyIgd2lkdGg9IjYiIHg9Ijk2MyIgeT0iMzQ0LjQ5MjIiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI0OSIgeD0iOTc1IiB5PSIzNTEuNzM0NCI%2BTG9uZyBpZDwvdGV4dD48cmVjdCBmaWxsPSJub25lIiBoZWlnaHQ9IjYiIHN0eWxlPSJzdHJva2U6I0M4MjkzMDtzdHJva2Utd2lkdGg6MTsiIHdpZHRoPSI2IiB4PSI5NjMiIHk9IjM1OS40NzY2Ii8%2BPHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMTMzIiB4PSI5NzUiIHk9IjM2Ni43MTg4Ij5Mb2NhbERhdGUgc3RhcnREYXRlPC90ZXh0PjxyZWN0IGZpbGw9Im5vbmUiIGhlaWdodD0iNiIgc3R5bGU9InN0cm9rZTojQzgyOTMwO3N0cm9rZS13aWR0aDoxOyIgd2lkdGg9IjYiIHg9Ijk2MyIgeT0iMzc0LjQ2MDkiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIxMTkiIHg9Ijk3NSIgeT0iMzgxLjcwMzEiPkxvY2FsRGF0ZSBlbmREYXRlPC90ZXh0PjxyZWN0IGZpbGw9Im5vbmUiIGhlaWdodD0iNiIgc3R5bGU9InN0cm9rZTojQzgyOTMwO3N0cm9rZS13aWR0aDoxOyIgd2lkdGg9IjYiIHg9Ijk2MyIgeT0iMzg5LjQ0NTMiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI5MSIgeD0iOTc1IiB5PSIzOTYuNjg3NSI%2BU3RyaW5nIHN0YXR1czwvdGV4dD48cmVjdCBmaWxsPSJub25lIiBoZWlnaHQ9IjYiIHN0eWxlPSJzdHJva2U6I0M4MjkzMDtzdHJva2Utd2lkdGg6MTsiIHdpZHRoPSI2IiB4PSI5NjMiIHk9IjQwNC40Mjk3Ii8%2BPHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMTI2IiB4PSI5NzUiIHk9IjQxMS42NzE5Ij5TdHJpbmcgZW1wbG95ZWVDaW48L3RleHQ%2BPHJlY3QgZmlsbD0ibm9uZSIgaGVpZ2h0PSI2IiBzdHlsZT0ic3Ryb2tlOiNDODI5MzA7c3Ryb2tlLXdpZHRoOjE7IiB3aWR0aD0iNiIgeD0iOTYzIiB5PSI0MTkuNDE0MSIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjkxIiB4PSI5NzUiIHk9IjQyNi42NTYzIj5TdHJpbmcgcmVhc29uPC90ZXh0PjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIgeDE9Ijk1NiIgeDI9IjEzNDQiIHkxPSI0MzIuNDA2MyIgeTI9IjQzMi40MDYzIi8%2BPGVsbGlwc2UgY3g9Ijk2NiIgY3k9IjQ0NS4zOTg0IiBmaWxsPSIjODRCRTg0IiByeD0iMyIgcnk9IjMiIHN0eWxlPSJzdHJva2U6IzAzODA0ODtzdHJva2Utd2lkdGg6MTsiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIyMTciIHg9Ijk3NSIgeT0iNDQ5LjY0MDYiPmNyZWF0ZUNvbmdlKGNvbmdlRFRPOiBDb25nZURUTyk8L3RleHQ%2BPGVsbGlwc2UgY3g9Ijk2NiIgY3k9IjQ2MC4zODI4IiBmaWxsPSIjODRCRTg0IiByeD0iMyIgcnk9IjMiIHN0eWxlPSJzdHJva2U6IzAzODA0ODtzdHJva2Utd2lkdGg6MTsiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIyODciIHg9Ijk3NSIgeT0iNDY0LjYyNSI%2BdXBkYXRlQ29uZ2UoaWQ6IExvbmcsIGNvbmdlRFRPOiBDb25nZURUTyk8L3RleHQ%2BPGVsbGlwc2UgY3g9Ijk2NiIgY3k9IjQ3NS4zNjcyIiBmaWxsPSIjODRCRTg0IiByeD0iMyIgcnk9IjMiIHN0eWxlPSJzdHJva2U6IzAzODA0ODtzdHJva2Utd2lkdGg6MTsiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIyMjQiIHg9Ijk3NSIgeT0iNDc5LjYwOTQiPmdldENvbmdlQnlJZChpZDogTG9uZyk6IENvbmdlRFRPPC90ZXh0PjxlbGxpcHNlIGN4PSI5NjYiIGN5PSI0OTAuMzUxNiIgZmlsbD0iIzg0QkU4NCIgcng9IjMiIHJ5PSIzIiBzdHlsZT0ic3Ryb2tlOiMwMzgwNDg7c3Ryb2tlLXdpZHRoOjE7Ii8%2BPHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMzY0IiB4PSI5NzUiIHk9IjQ5NC41OTM4Ij5nZXRDb25nZUJ5RW1wbG95ZWVDaW4oZW1wbG95ZWVDaW46IFN0cmluZyk6IENvbmdlRFRPPC90ZXh0PjxlbGxpcHNlIGN4PSI5NjYiIGN5PSI1MDUuMzM1OSIgZmlsbD0iIzg0QkU4NCIgcng9IjMiIHJ5PSIzIiBzdHlsZT0ic3Ryb2tlOiMwMzgwNDg7c3Ryb2tlLXdpZHRoOjE7Ii8%2BPHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMjAzIiB4PSI5NzUiIHk9IjUwOS41NzgxIj5nZXRBbGxDb25nZSgpOiBMaXN0Jmx0O0NvbmdlRFRPJmd0OzwvdGV4dD48ZWxsaXBzZSBjeD0iOTY2IiBjeT0iNTIwLjMyMDMiIGZpbGw9IiM4NEJFODQiIHJ4PSIzIiByeT0iMyIgc3R5bGU9InN0cm9rZTojMDM4MDQ4O3N0cm9rZS13aWR0aDoxOyIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjE0NyIgeD0iOTc1IiB5PSI1MjQuNTYyNSI%2BZGVsZXRlQ29uZ2UoaWQ6IExvbmcpPC90ZXh0PjwvZz48IS0tbGluayBFbXBsb3llZSB0byBDb25nZS0tPjxnIGNsYXNzPSJsaW5rIiBkYXRhLWVudGl0eS0xPSJFbXBsb3llZSIgZGF0YS1lbnRpdHktMj0iQ29uZ2UiIGRhdGEtc291cmNlLWxpbmU9IjU3IiBkYXRhLXVpZD0ibG5rNiIgaWQ9ImxpbmtfRW1wbG95ZWVfQ29uZ2UiPjxwYXRoIGNvZGVMaW5lPSI1NyIgZD0iTTg2OS43LDIyMC4yIEM5MDcuODcsMjQ2Ljc5IDk0OC45OSwyNzUuNDQgOTg3LjY1LDMwMi4zOCIgZmlsbD0ibm9uZSIgaWQ9IkVtcGxveWVlLUNvbmdlIiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7Ii8%2BPHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTMiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMTkuNSIgeD0iOTM1IiB5PSIyNjMuMjg5MSI%2BaGFzPC90ZXh0Pjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjEzIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjYuNSIgeD0iODczLjcwNzYiIHk9IjI0MC4xMzEyIj4xPC90ZXh0Pjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjEzIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjYuNSIgeD0iOTY5LjUyNTUiIHk9IjI5Mi44NTE1Ij4qPC90ZXh0PjwvZz48IS0tbGluayBFbXBsb3llZSB0byBDb250cmFjdC0tPjxnIGNsYXNzPSJsaW5rIiBkYXRhLWVudGl0eS0xPSJFbXBsb3llZSIgZGF0YS1lbnRpdHktMj0iQ29udHJhY3QiIGRhdGEtc291cmNlLWxpbmU9IjU4IiBkYXRhLXVpZD0ibG5rNyIgaWQ9ImxpbmtfRW1wbG95ZWVfQ29udHJhY3QiPjxwYXRoIGNvZGVMaW5lPSI1OCIgZD0iTTcxOCwyMjAuMiBDNzE4LDI0NC4zNCA3MTgsMjcwLjE3IDcxOCwyOTQuODgiIGZpbGw9Im5vbmUiIGlkPSJFbXBsb3llZS1Db250cmFjdCIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjEzIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjE5LjUiIHg9IjcxOSIgeT0iMjYzLjI4OTEiPmhhczwvdGV4dD48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxMyIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI2LjUiIHg9IjcxMS44MTUyIiB5PSIyNDAuMTMxMiI%2BMTwvdGV4dD48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxMyIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI2LjUiIHg9IjcxMS44MDY2IiB5PSIyODUuMTk5OSI%2BMTwvdGV4dD48L2c%2BPCEtLWxpbmsgRW1wbG95ZWUgdG8gRGVwYXJ0bWVudC0tPjxnIGNsYXNzPSJsaW5rIiBkYXRhLWVudGl0eS0xPSJFbXBsb3llZSIgZGF0YS1lbnRpdHktMj0iRGVwYXJ0bWVudCIgZGF0YS1zb3VyY2UtbGluZT0iNTkiIGRhdGEtdWlkPSJsbms4IiBpZD0ibGlua19FbXBsb3llZV9EZXBhcnRtZW50Ij48cGF0aCBjb2RlTGluZT0iNTkiIGQ9Ik01NTEuNTUsMjIwLjIgQzQ5My42NywyNTYuOTYgNDI5LjYsMjk3LjY0IDM3NC45OSwzMzIuMzIiIGZpbGw9Im5vbmUiIGlkPSJFbXBsb3llZS1EZXBhcnRtZW50IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7Ii8%2BPHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTMiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iNjUiIHg9IjQ5NyIgeT0iMjYzLjI4OTEiPmJlbG9uZ3MgdG88L3RleHQ%2BPHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTMiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iNi41IiB4PSI1MzQuMTgxOSIgeT0iMjQwLjEzMTIiPio8L3RleHQ%2BPHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTMiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iNi41IiB4PSIzODEuMjEyOSIgeT0iMzIzLjAxNTYiPjE8L3RleHQ%2BPC9nPjwhLS1TUkM9W2RMR3pSdUNtNER0djVIT0pJUGlYQXdlWWpQMFhLakdFSFVmaXU0OVNFSFhYUHVZZ19sVVEzempkODlOUXBOeHR4aFh4eHQzMWdQSGFWc2N1azA2R2h1MkdwTDdLNU01YlR0bk5CVEVOV2pOZVRjQWpMQV9xMFdaSlBRUEc4b0hKSkUzQ2JrTnd6YjJxRzFNT1p0dW1US3Y0aExmUWcwWDZpMVkxRDdrQlJOaThON0xyaGFzOXdhSWlaNGROLW9Gdkt2S0FiMGN6dDB3YkJSRFFKMWFwZFphdEdIYmZ2ZjU5elJIMHR0Tnk0WldpekJhQWxlRVd3MHI4ZVE2amthMmp4YmJHSl9HTTFIdDU3VUxxOVFCSTdsbDFLdG1yOHBqbUVoSDdULUN3czB0aUtUNmVnMVN0aDh4Z0tMYkw2bzRvV05aNmllQ3JxS3JuYzBqYzVrUmtuZXhueERScWlnTlljZENXYWRCUXRYM2xLLUdQS25vNkFXTmJnUFFJSUFNX3Q5cnk2RWhJVzZEdzNaTVNjOUJFMWhsOXRrdWJZdmpoa012cFZ5dElIWFhlUWJlb3NyMzd0NWpmUG9oRkNtUzNQdnNqdDJBT2M1azMxRXl4amdZUWxvWl80NWFKckxLWW00b0hVQy1JYmJfWTd3Ql9WY1QzMUtSRF9rR1JLODZsX1g5dktCRTIxVDV4YWlfUGstdVlyNmJDWFp4ZFVPRWNrWDZhUG5fVlVPUEthdlYzRmpoWERZSVIzR2ROdVFYdkpDdktwa0ZScUZxc0t5aFFLajFKNUVsenZoZ1k5NGh5MDAwMF0tLT48L2c%2BPC9zdmc%2B%3B%22%20vertex%3D%221%22%20parent%3D%221%22%3E%3CmxGeometry%20x%3D%22-111%22%20width%3D%221352%22%20height%3D%22544%22%20as%3D%22geometry%22%2F%3E%3C%2FmxCell%3E%3C%2FUserObject%3E%3C%2Froot%3E%3C%2FmxGraphModel%3E to Conge entity
        Conge conge = congeMapper.toEntity(congeDTO);
        conge.setEmployee(employee);

        // Save the Conge entity
        conge = congeRepository.save(conge);

        // Convert the saved Conge entity back to CongeDTO and return
        return congeMapper.toDto(conge);
    }

    @Override
    public CongeDTO updateConge(Long congeId, CongeDTO congeDTO) {
        // Find the existing Conge entity by ID
        Conge conge = congeRepository.findById(congeId)
                .orElseThrow(() -> new RuntimeException("Conge not found"));

        // Update the Conge entity using the CongeDTO
        congeMapper.updateEntityFromDto(congeDTO, conge);

        // Save the updated Conge entity
        conge = congeRepository.save(conge);

        // Convert the updated Conge entity back to CongeDTO and return
        return congeMapper.toDto(conge);
    }

    @Override
    public CongeDTO getCongeById(Long congeId) {
        // Find the Conge entity by ID
        Conge conge = congeRepository.findById(congeId)
                .orElseThrow(() -> new RuntimeException("Conge not found"));

        // Convert Conge entity to CongeDTO and return
        return congeMapper.toDto(conge);
    }

    @Override
    public CongeDTO getCongeByEmployeeCin(String employeeCin) {
        // Find the Conge entity by employee CIN
        Conge conge = congeRepository.findByEmployeeCin(employeeCin)
                .orElseThrow(() -> new RuntimeException("Conge not found for employee"));

        // Convert Conge entity to CongeDTO and return
        return congeMapper.toDto(conge);
    }

    @Override
    public List<CongeDTO> getAllConge() {
        // Fetch all Conge entities
        List<Conge> conges = congeRepository.findAll();

        // Convert the list of Conge entities to a list of CongeDTOs
        return conges.stream()
                .map(congeMapper::toDto)
                .collect(Collectors.toList());
    }

    @Override
    public void deleteConge(Long congeId) {
        // Find the Conge entity by ID
        Conge conge = congeRepository.findById(congeId)
                .orElseThrow(() -> new RuntimeException("Conge not found"));

        // Delete the Conge entity
        congeRepository.delete(conge);
    }
}
